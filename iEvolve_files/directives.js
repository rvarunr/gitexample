define(["angular","services"],function(angular,services){var app=angular.module("lndService",[]);app.directive("ngBlur",function(){return{restrict:"A",link:function postLink(scope,elm,attr){elm.bind("blur",function(){scope.$apply(attr.ngBlur);});}};});app.directive("offering",function(){return{restrict:"EA",transclude:true,scope:{data:"=data"},templateUrl:"./pages/search/template/offering.html",};});app.directive("competency",function(){return{restrict:"EA",transclude:true,scope:{data:"=data"},templateUrl:"./pages/search/template/competency.html",};});app.directive("courses",function(){return{restrict:"EA",transclude:true,scope:{course:"=data"},templateUrl:"./pages/search/template/course.html",};});app.directive("exams",function(){return{restrict:"EA",transclude:true,scope:{exam:"=data"},templateUrl:"./pages/search/template/exams.html",};});app.directive("certifications",function(){return{restrict:"EA",transclude:true,scope:{items:"=data"},templateUrl:"./pages/search/template/certification.html",};});app.directive('external', function(){	return{		restrict : 'EA',		transclude: true,		scope: { items : '=data' },		templateUrl: './pages/search/template/external.html',	};});app.directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){if(event.which===13){scope.$apply(function(){scope.$eval(attrs.ngEnter);});event.preventDefault();}});};});app.directive("charleft",["$timeout",function($timeout){return{link:function(scope,iElem,iAttrs,ctrl){$timeout(function(){var t=$("#"+iAttrs.charleft);var maxlen=parseInt(t.attr("maxlength"));$(iElem).html(maxlen-t.val().length);$(t).keyup(function(event){var x=$(t).val();var newLines=x.match(/(\r\n|\n|\r)/g);var addition=0;if(newLines!=null){addition=newLines.length;}if(x.length+addition>maxlen&&event.which==13){addition--;$(t).val($(t).val().substring(0,maxlen));}$(iElem).html(maxlen-(x.length+addition));});},[0],[true]);}};}]);app.directive("charleftph",["$timeout",function($timeout){return{link:function(scope,iElem,iAttrs,ctrl){$timeout(function(){var t=$("#"+iAttrs.charleftph);var maxlen=parseInt(t.attr("maxlength"));$(iElem).html(maxlen);$(t).keyup(function(event){var x=$(t).val();var newLines=x.match(/(\r\n|\n|\r)/g);var addition=0;if(newLines!=null){addition=newLines.length;}if(x.length+addition>maxlen&&event.which==13){addition--;$(t).val($(t).val().substring(0,maxlen));}$(iElem).html(maxlen-(x.length+addition));});},[0],[true]);}};}]);app.directive("ngTrimFalse",["$timeout",function($timeout){return{link:function(s,e,a){$(e).keydown(function(){$timeout(function(){var parts=a.ngModel.split(".");var model=s;for(var i=0;i<parts.length-1;i++){model=model[parts[i]];}model[parts[i]]=$(e).val();s.$apply();},[0],[true]);});}};}]);app.directive("myMaxlength",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){var maxlength=Number(attrs.myMaxlength);function fromUser(text){text=text.replace(/\r/g,"");if(text.length>maxlength){var transformedInput=text.substring(0,maxlength);ngModelCtrl.$setViewValue(transformedInput);ngModelCtrl.$render();return transformedInput;}return text;}ngModelCtrl.$parsers.push(fromUser);}};});app.directive("empty",function(){return{restrict:"A",link:function(scope,element,attrs){scope.$watch(attrs.empty,function(newValue,oldValue){try{if(!newValue||newValue==""||newValue.length<=0){var parts=attrs.empty.split("."),current=scope;for(var i=0;i<parts.length-1;i+=1){current=current[parts[i]];}current[parts[parts.length-1]]="NA";}}catch(e){var g=element.attr("data-guard");scope.$watch(g,function(newValue,oldValue){if(newValue){try{if(!newValue||newValue==""||newValue.length<=0){var parts=attrs.empty.split("."),current=scope;for(var i=0;i<parts.length-1;i+=1){current=current[parts[i]];}current[parts[parts.length-1]]="NA";}}catch(e){}}});}});}};});app.directive("paginationList",["$filter","$timeout",function($filter,$timeout){return{restrict:"EA",replace:true,transclude:true,template:"<div class = 'pagination'><div data-ng-hide='_paginationHide'><a class=ld-hyperlink ng-style = \"_paginationPrevDisabled && {'color':'grey'}\" ng-class = '{disabled: _paginationPrevDisabled}' href = '' ng-click = '_paginationPrev();globalErrorShow=false;globalSuccessShow=false'>Previous</a><!-- Page Indices: Start --><select data-ng-options = '_paginationMkRange(p) for p in [] | numberArray:1:_paginationPageCount'style = 'width: auto; margin: 0 7px;'data-ng-model = '_paginationActivePage' data-ng-change = '_paginationPage(_paginationActivePage);globalErrorShow=false;globalSuccessShow=false'></select><!-- Page Indices: End --><span style = 'margin-right: 7px;'>of {{_paginationTotalRec}}</span><a class=ld-hyperlink ng-style = \"_paginationNextDisabled && {'color':'grey'}\" ng-class = '{disabled: _paginationNextDisabled}' href = '' ng-click = '_paginationNext();globalErrorShow=false;globalSuccessShow=false'>Next</a></div></div>",link:function(scope,element,attrs){var pageSize,totalRecords,windowSize,onPrev,onNext,onPage,pageCount,start=1,total;if(isNaN(scope._paginationActivePage)){scope._paginationActivePage=1;}scope._paginationPrevDisabled=true;scope._paginationBetween=function(input,start,end){if(start<=input&&input<=end){return true;}return false;};pageSize=element.attr("page-size");pageSize=scope.$eval(pageSize)||10;if(typeof pageSize!="number"){throw"Expected type for 'page-size' is number";}total=element.attr("total-records");if(angular.isString(total)&&!parseInt(total)){scope.$watch(total,function(){scope._paginationPageCount=Math.floor(scope[total]/pageSize);if(scope[total]%pageSize!==0){scope._paginationPageCount+=1;}if(scope._paginationPageCount<=1){scope._paginationNextDisabled=true;}else{scope._paginationNextDisabled=false;}scope._paginationTotalRec=scope[total];if(isNaN(parseInt(scope._paginationTotalRec))){scope._paginationTotalRec=0;}if(pageSize>=scope[total]){scope._paginationHide=true;}else{scope._paginationHide=false;}});}else{if(parseInt(total)){totalRecords=parseInt(total);}}windowSize=element.attr("window-size");if(!windowSize||!typeof windowSize=="number"){windowSize=3;}scope._paginationWindowSize=parseInt(windowSize);scope._paginationStart=start;scope._paginationEnd=(scope._paginationStart+scope._paginationWindowSize)-1;scope._paginationTotalRec=totalRecords;if(isNaN(parseInt(scope._paginationTotalRec))){scope._paginationTotalRec=0;}scope._paginationMkRange=function(pageIndex){var last=pageIndex*pageSize;if(pageIndex==scope._paginationPageCount){last=scope._paginationTotalRec;}return(pageIndex-1)*pageSize+1+"-"+last;};scope._paginationReload=function(){scope._paginationStart=start;scope._paginationEnd=(scope._paginationStart+scope._paginationWindowSize)-1;scope._paginationActivePage=1;};onPrev=element.attr("on-prev");onPrev=scope.$eval(onPrev);if(!angular.isFunction(onPrev)){throw"on-prev should be a valid function.";}onNext=element.attr("on-next");onNext=scope.$eval(onNext);if(!angular.isFunction(onNext)){throw"on-next should be a valid function.";}onPage=element.attr("on-page");onPage=scope.$eval(onPage);if(!angular.isFunction(onPage)){throw"on-page should be a valid function.";}scope._paginationPageCount=Math.floor(totalRecords/pageSize);if(totalRecords%pageSize!==0){scope._paginationPageCount+=1;}if(scope._paginationPageCount<=1){scope._paginationNextDisabled=true;}scope._paginationPrev=function(){if(scope._paginationActivePage>1){$timeout(onPrev,[0],[true]);scope._paginationActivePage-=1;if(scope._paginationActivePage<scope._paginationStart){scope._paginationStart-=1;scope._paginationEnd-=1;}}};scope._paginationNext=function(){if(scope._paginationActivePage<scope._paginationPageCount){$timeout(onNext,[0],[true]);scope._paginationActivePage+=1;if(scope._paginationActivePage>scope._paginationEnd){scope._paginationStart+=1;scope._paginationEnd+=1;}}};scope._paginationPage=function(index){scope._paginationActivePage=index;$timeout(function(){onPage(index);},[0],[true]);};scope.$watch("_paginationActivePage",function(){scope._paginationPrevDisabled=false;scope._paginationNextDisabled=false;if(scope._paginationActivePage+1>scope._paginationPageCount){scope._paginationNextDisabled=true;}if(scope._paginationActivePage-1<start){scope._paginationPrevDisabled=true;}});}};}]);app.directive("wholeNumber",function(){return{require:"ngModel",link:function(scope,element,attr,ngModelCtrl){function fromUser(text){var transformedInput=text.replace(/[^0-9]/g,"");if(transformedInput!==text){ngModelCtrl.$setViewValue(transformedInput);ngModelCtrl.$render();}return transformedInput;}ngModelCtrl.$parsers.push(fromUser);}};});app.directive("myEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){if(event.which===13){scope.$apply(function(){scope.$eval(attrs.myEnter);});event.preventDefault();}});};});app.directive("mySelectAll",["$filter",function($filter){return{restrict:"E",template:'<input type="checkbox">',replace:true,link:function(scope,iElement,iAttrs){function changeState(checked,indet){iElement.prop("checked",checked).prop("indeterminate",indet);}function updateItems(){angular.forEach(scope.$eval(iAttrs.items),function(el){el[iAttrs.prop]=iElement.prop("checked");});}iElement.bind("change",function(){scope.$apply(function(){updateItems();});});scope.$watch(iAttrs.items,function(newValue){var checkedItems=$filter("filter")(newValue,function(el){return el[iAttrs.prop];});switch(checkedItems?checkedItems.length:0){case 0:changeState(false,false);break;case newValue.length:changeState(true,false);break;default:changeState(false,true);}},true);updateItems();}};}]);app.directive("ngUpload",function(){return{restrict:"A",link:function(scope,element,attrs){var options={};options.enableControls=attrs["uploadOptionsEnableControls"];if(attrs["ngUpload"]){element.attr("target","upload_iframe");element.attr("method","post");element.attr("action",element.attr("action")+"?_t="+new Date().getTime());element.attr("enctype","multipart/form-data");element.attr("encoding","multipart/form-data");var fn=attrs["ngUpload"].split("(")[0];var callbackFn=scope.$eval(fn);if(callbackFn==null||callbackFn==undefined||!angular.isFunction(callbackFn)){var message="The expression on the ngUpload directive does not point to a valid function.";throw message+"\n";}var addNewDisposableIframe=function(submitControl){var iframe=$("<iframe id='upload_iframe' name='upload_iframe' border='0' width='0' height='0' style='width: 0px; height: 0px; border: none; display: none' />");iframe.bind("load",function(){var content=iframe.contents().find("body").text();scope.$apply(function(){callbackFn(content,content!=="");});if(content!=""){setTimeout(function(){iframe.remove();},250);}submitControl.attr("disabled",null);submitControl.attr("title","Click to start upload.");});element.parent().append(iframe);};$(".upload-submit",element).click(function(){addNewDisposableIframe($(this));scope.$apply(function(){callbackFn("Please wait...",false);});var bFn=element.attr("before-upload");var readyToUpload=true;if(bFn){var beforeFn=scope.$eval(bFn);if(beforeFn==null||beforeFn==undefined||!angular.isFunction(beforeFn)){var message="The expression on the ngUpload directive does not point to a valid function.";throw message+"\n";}readyToUpload=readyToUpload&&scope.$apply(beforeFn);}var enabled=true;if(options.enableControls===null||options.enableControls===undefined||options.enableControls.length>=0){$(this).attr("disabled","disabled");enabled=false;}$(this).attr("title",(enabled?"[ENABLED]: ":"[DISABLED]: ")+"Uploading, please wait...");if(readyToUpload){$(element).submit();}else{$(this).removeAttr("disabled");enabled=true;$(this).attr("title","Click to start upload.");}}).attr("title","Click to start upload.");}}};});app.directive("placeholder",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){var value;var placeholder=function(){element.val(attr.placeholder);};var unplaceholder=function(){element.val("");};scope.$watch(attr.ngModel,function(val){value=val||"";});element.bind("focus",function(){if(value==""){unplaceholder();}});element.bind("blur",function(){if(element.val()==""){placeholder();}});element.bind("keydown keypress",function(event){if(event.which===13){scope.$apply(function(){if(value==""){unplaceholder();}});}});ctrl.$formatters.unshift(function(val){if(!val){placeholder();value="";return attr.placeholder;}return val;});}};});app.directive("msg",function(){return{restrict:"EA",link:function(scope,element,attrss){var key=attrss.key;if(attrss.keyExpr){scope.$watch(attrss.keyExpr,function(value){key=value;element.text($.i18n.prop(value));});}scope.$watch("language",function(value){element.text($.i18n.prop(key));});}};});app.directive("decimalPlaces",function(){return{link:function(scope,ele,attrs){ele.bind("keypress",function(e){var newVal=$(this).val()+(e.charCode!==0?String.fromCharCode(e.charCode):"");if((newVal.toString().split(".")[0]).length>10){e.preventDefault();}if($(this).val().search(/(.*)\.[0-9][0-9]/)===0&&newVal.length>$(this).val().length){e.preventDefault();}});}};});app.directive("decimalNumber",function(){return{require:"ngModel",link:function(scope,element,attr,ngModelCtrl){function fromUser(text){var transformedInput=text.replace(/[^\.0-9]/g,"");if(transformedInput!==text){ngModelCtrl.$setViewValue(transformedInput);ngModelCtrl.$render();}return transformedInput;}ngModelCtrl.$parsers.push(fromUser);}};});app.directive("compLevel",["$filter",function($filter){return{restrict:"A",template:'<table class="graph" style="width: 100%;">'+' <thead><tr style="text-align: center;background: transparent">'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strReqProfLvl ==null"><img src="appResources/images/required.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strReqProfLvl ==1"><img src="appResources/images/required.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strReqProfLvl ==2"><img src="appResources/images/required.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strReqProfLvl ==3"><img src="appResources/images/required.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strReqProfLvl ==4"><img src="appResources/images/required.png"></span></td></tr>'+" </thead><tbody>"+' <tr style="background: transparent">'+' <td ng-repeat = "profLvl in data.levelFromDataBase" style="width:50px;">{{profLvl}}'+' <div ng-hide = "$index == data.levelFromDataBase.length - 1" style="height: 3px; width: 24px; margin-bottom: 0px;background-color:#E0E0E0;margin-top: -12px;margin-left: 20px;" ></div>'+" </td>"+" </tr>"+'<tr style="text-align: center;background: transparent">'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strHeldProfLvl ==null"><img src="appResources/images/present.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strHeldProfLvl == 1"><img src="appResources/images/present.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strHeldProfLvl == 2"><img src="appResources/images/present.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strHeldProfLvl == 3"><img src="appResources/images/present.png"></span></td>'+' <td style="padding-left:3px;width:50px;"><span ng-show="data._strHeldProfLvl ==4"><img src="appResources/images/present.png"></span></td></tr></tbody>'+" </table>"};}]);app.directive("compLevel1",["$filter",function($filter){return{restrict:"A",template:'<table class="customTable" style="width: 100%;">'+"<tbody>"+'<tr style="font-size: 10px; font-weight: bold; text-align: center;">'+'<td ng-repeat="comp in compLevel">{{comp}}</td>'+"</tr>"+"<tr>"+'<td ng-repeat="comp in compLevel" ng-class="getClass($index)"><span class="ld-red-dot"  alt="My Current Competency" style="position:absolute; margin-top: -4px;" ng-show="myRequiredLevel($index)" ></span><span class="ld-green-dot"  alt="My Held Competency" style="position:absolute; margin-top: -4px;"  ng-show="myHeldLevel($index)"  ></span></td>'+"</tr>"+"</tbody></table>",link:function(scope,element,attrs){if(typeof attrs.maxLevel=="undefined"){attrs.maxLevel="5";}scope.eLevel=["E0","E1","E2","E3","E4"];scope.lLevel=["L0","L1","L2","L3","L4"];scope.compLevel=[];attrs.$observe("scale",function(value){attrs.$observe("heldLevel",function(value){attrs.$observe("maxLevel",function(value){if(attrs.scale=="E"){for(var i=0;i<attrs.maxLevel;i++){scope.compLevel.push(scope.eLevel[i]);}}else{if(attrs.scale=="L"){for(var i=0;i<attrs.maxLevel;i++){scope.compLevel.push(scope.lLevel[i]);}}}scope.getMaxLevel=function(){return attrs.maxLevel;};scope.getHeldLevel=function(){return attrs.heldLevel;};scope.getRequiredLevel=function(){return attrs.requiredLevel;};scope.myRequiredLevel=function(index){if(parseInt(scope.getRequiredLevel())==(parseInt(index)+1)){return true;}else{return false;}};scope.myHeldLevel=function(index){if(parseInt(scope.getHeldLevel())==(parseInt(index)+1)){return true;}else{return false;}};scope.getClass=function(index){var req=parseInt(attrs.requiredLevel);var held=parseInt(attrs.heldLevel);var temp=index;var index=parseInt(temp)+1;if(index!=5){if(attrs.heldLevel!=""&&attrs.heldLevel!=null){if(req==held){if(index<req){return"green-bg";}else{return"grey-bg";}}else{if(req<held){if(index<req){return"green-bg";}else{if(index==req){return"green-bg";}else{if((index>req)&&(index<held)){return"green-bg";}else{return"grey-bg";}}}}else{if(req>held){if(index<held){return"red-bg";}else{if(index==held){return"red-bg";}else{if((index>held)&&(index<req)){return"red-bg";}else{return"grey-bg";}}}}}}}else{if(parseInt(index)<parseInt(attrs.requiredLevel)){return"red-bg";}else{return"grey-bg";}}}};});});});}};}]);app.directive("graphcreator",function(){return{template:'<table class="table graph" style="width: 100%;	margin-bottom:0px;">'+"<tbody>"+'<tr style="font-size: 10px; font-weight: bold;background-color: transparent;">'+'<td style="text-align: right;">E</td>'+'<td style="text-align: left;">0</td>'+'<td style="text-align: right;">E</td>'+'<td style="text-align: left;">1</td>'+'<td style="text-align: right;">E</td>'+'<td style="text-align: left;">2</td>'+'<td style="text-align: right;">E</td>'+'<td style="text-align: left;">3</td>'+'<td style="text-align: right;">E</td>'+'<td style="text-align: left;">4</td>'+"</tr>"+'<tr  style="height: 20px;background:transparent">'+"<td></td>"+'<td style="text-align: center;">'+'<div style="height: 4px; width: 100%; margin-bottom: 0px; float: right;" ng-style="data._strColor1"></div>'+'<div ng-show="data._strHeldProfLvl == 1" style="position: relative;">'+'<img src="appResources/images/Green_Dot.png" style="width:12px;background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;">'+"</div>"+'<div ng-show="data._strReqProfLvl == 1" style="position: relative;">'+'<img src="appResources/images/Red_Dot.png"	style="width:12px;background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;">'+"</div>"+"</td>"+'<td><div style="height: 4px; width: 100%; margin-bottom: 0px; float: left;" ng-style="data._strColor11"></div></td>'+'<td><div style="height: 4px; width: 100%; margin-bottom: 0px; float: right;" ng-style="data._strColor2"></div>'+'<div ng-show="data._strHeldProfLvl == 2" style="position: relative;">'+'<img src="appResources/images/Green_Dot.png" style="width:12px;background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;">'+"</div>"+'<div ng-show="data._strReqProfLvl == 2" style="position: relative;">'+'<img src="appResources/images/Red_Dot.png" style="width:12px;background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;">'+"</div>"+"</td>"+'<td style="text-align: center">'+'<div style="height: 4px; width: 100%; margin-bottom: 0px; float: left;" ng-style="data._strColor21"></div>'+"</td>"+'<td><div style="height: 4px; width: 100%; margin-bottom: 0px; float: right;" ng-style="data._strColor3"></div>'+'<div ng-show="data._strHeldProfLvl == 3" style="position: relative;">'+'<img src="appResources/images/Green_Dot.png" style="background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;width:12px">'+"</div>"+'<div ng-show="data._strReqProfLvl == 3" style="position: relative;">'+'<img src="appResources/images/Red_Dot.png" style="background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;width:12px">'+"</div></td>"+'<td style="text-align: center">'+'<div style="height: 4px; width: 100%; margin-bottom: 0px; float: left;" ng-style="data._strColor31"></div>'+"</td>"+"<td>"+'<div style="height: 4px; width: 100%; margin-bottom: 0px; float: right;" ng-style="data._strColor4"></div>'+'<div ng-show="data._strHeldProfLvl == 4" style="position: relative;">'+'<img src="appResources/images/Green_Dot.png" style="background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;width:12px">'+"</div>"+'<div ng-show="data._strReqProfLvl == 4" style="position: relative;">'+'<img src="appResources/images/Red_Dot.png" style="background: transparent; position: absolute; z-index: 100; top: -4px; left: -8px;width:12px">'+"</div>"+"</td>"+'<td style="text-align: center">'+'<div style="height: 4px; width: 100%; margin-bottom: 0px;" ng-style="data._strColor41"></div>'+"</td>"+'<td style="text-align: center;">'+'<div ng-show="data._strHeldProfLvl == 5" style="position: relative;">'+'<img src="appResources/images/Green_Dot.png" style="background: transparent; position: absolute; z-index: 100; top: -6px; left: -8px;width:12px">'+"</div>"+'<div ng-show="data._strReqProfLvl == 5" style="position: relative;">'+'<img src="appResources/images/Red_Dot.png" style="background: transparent;width:12px; position: absolute; z-index: 100; top: -6px; left: -8px;">'+"</div></td>"+"</tr>"+"</tbody>"+"</table>",restrict:"EA",replace:true};});app.directive("description",function(){return{restrict:"EA",scope:{desc:"@"},template:'<span style="word-break: break-word;" class="ld-search-course-description">{{currentDesc}}</span><kbd ng-show="showMore && isRequired">...</kbd> <a class="ld-hyperlink" ng-show="showMore && isRequired" ng-click="showMorefnc()">Show More</a> <a class="ld-hyperlink" ng-show="!(showMore) && isRequired" ng-click="showLessfnc()">&nbsp;----Show Less</a>',link:function(scope,element,attrs){if(attrs.maxlength){scope.maxLength=attrs.maxlength;}else{scope.maxLength=100;}attrs.$observe("desc",function(value){scope.originalDesc=value;scope.descLength=scope.originalDesc.length;if(scope.descLength>scope.maxLength){scope.isRequired=new Boolean("true");}else{scope.isRequired=new Boolean();}scope.shortDesc=value.substring(0,scope.maxLength);scope.currentDesc=scope.shortDesc;scope.showMore=new Boolean("true");});scope.showMorefnc=function(){scope.currentDesc=scope.originalDesc;scope.showMore=!scope.showMore;};scope.showLessfnc=function(){scope.currentDesc=scope.shortDesc;scope.showMore=!scope.showMore;};}};});app.directive("contenteditable",function(){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){if(!ngModel){return;}ngModel.$render=function(){element.html(ngModel.$viewValue||"");};element.on("blur keyup change",function(){scope.$apply(read);});read();function read(){var html=element.html();if(attrs.stripBr&&html=="<br>"){html="";}ngModel.$setViewValue(html);}}};});app.directive("myPagination",function(){return{restrict:"EA",scope:{currentPage:"=",totalCount:"=",onSelectPage:"&"},template:'<div align="right" ><a class="ld-hyperlink" ng-click="selectPrevious()" ng-class="{disabled: noPrevious()}">Previous</a>  <select class="span3 ng-pristine ng-valid" ng-change="selectPage(curPage)" ng-model="curPage" ng-options="page.pageNo as page.pageDisplay for page in pages"></select>   of {{totalCount}}   <a class="ld-hyperlink" ng-click="selectNext()" ng-class="{disabled: noNext()}">Next</a></div>',replace:true,link:function(scope,element,attrs){scope.curPage=scope.currentPage;scope.refreshPage=false;scope.$watch("totalCount",function(value){scope.numPages=0;scope.numPages=Math.ceil(value/10);scope.pages=[];for(var i=1;i<=scope.numPages;i++){scope.startPage=((i*10)-9);scope.endPage=(i*10)>value?value:(i*10);scope.pageObject={pageNo:i,pageDisplay:scope.startPage+"-"+scope.endPage};scope.pages.push(scope.pageObject);}if(scope.numPages!=0&&scope.currentPage>scope.numPages){scope.currentPage=scope.numPages;}else{scope.refreshPage=true;}});scope.$watch("currentPage",function(value){alert("currPage in direc="+value);if(value){scope.curPage=scope.currentPage;if(!scope.$$phase){scope.$apply();}scope.onSelectPage();}});scope.$watch("refreshPage",function(value){if(value){if(value===true){scope.curPage=scope.currentPage;scope.onSelectPage();scope.refreshPage=false;}}});scope.noPrevious=function(){return scope.numPages===0||scope.currentPage===1;};scope.noNext=function(){return scope.numPages===0||scope.currentPage===scope.numPages;};scope.isActive=function(page){return scope.currentPage===page;};scope.getCurrentPage=function(page){return scope.currentPage;};scope.selectPage=function(page){scope.currentPage=page;};scope.selectPrevious=function(){if(!scope.noPrevious()){scope.curPage=scope.currentPage-1;scope.selectPage(scope.currentPage-1);}};scope.selectNext=function(){if(!scope.noNext()){scope.curPage=scope.currentPage+1;scope.selectPage(scope.currentPage+1);}};}};});app.directive("myPagination1",["$timeout",function($timeout){return{restrict:"EA",scope:{currentPage:"=",totalCount:"=",onSelectPage:"&",pageSize:"=",refreshPage:"=",active:"="},template:'<div align="right"><a class="ld-hyperlink" ng-click="selectPrevious()" ng-class="{disabled: noPrevious()}">Previous</a>&nbsp;&nbsp;<select class="span3 ng-pristine ng-valid" style="width:auto;" ng-change="selectPage(curPage)" ng-model="curPage" ng-options="page.pageNo as page.pageDisplay for page in pages"><option value="pages[0].pageNo"  ng-selected="selected" >{{pages[0].pageDisplay}}</option></select> &nbsp; of {{totalCount}} &nbsp;&nbsp;<a class="ld-hyperlink" ng-click="selectNext()" ng-class="{disabled: noNext()}">Next</a></div>',replace:true,link:function(scope,element,attrs){scope.curPage=scope.currentPage;scope.$on("resetCurPage",function(){scope.curPage=1;scope.currentPage=1;});scope.$watch("totalCount",function(value){scope.numPages=0;scope.numPages=Math.ceil(value/(scope.pageSize));scope.pages=[];for(var i=1;i<=scope.numPages;i++){scope.startPage=((i*(scope.pageSize))-(scope.pageSize-1));scope.endPage=(i*(scope.pageSize))>value?value:(i*(scope.pageSize));scope.pageObject={pageNo:i,pageDisplay:scope.startPage+"-"+scope.endPage};scope.pages.push(scope.pageObject);}if(scope.numPages!=0&&scope.currentPage>scope.numPages){scope.currentPage=scope.numPages;}});scope.$watch("currentPage",function(value){if(value){scope.currentPage=value;scope.curPage=scope.currentPage;if(scope.refreshPage==false&&scope.active==true){scope.onSelectPage(scope.currentPage);}}});scope.$watch("refreshPage",function(value){if(value){if(value===true){scope.curPage=scope.currentPage;if(scope.active==true){scope.onSelectPage(value);}scope.refreshPage=false;}}});scope.noPrevious=function(){return scope.numPages===0||scope.currentPage===1;};scope.noNext=function(){return scope.numPages===0||scope.currentPage===scope.numPages;};scope.isActive=function(page){return scope.currentPage===page;};scope.getCurrentPage=function(page){return scope.currentPage;};scope.selectPage=function(page){scope.currentPage=page;};scope.selectPrevious=function(){if(!scope.noPrevious()){scope.curPage=scope.currentPage-1;scope.selectPage(scope.currentPage-1);}};scope.selectNext=function(){if(!scope.noNext()){scope.curPage=scope.currentPage+1;scope.selectPage(scope.currentPage+1);}};}};}]);app.directive("myMinDate",["$filter",function($filter){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,controller){attrs.$observe("minDateVal",function(value){if(value){var newDate;var dateReg=/(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2})[+-.](\d{3})Z/;var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0){if(parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10)==parseInt(8)){var orginalLength=(value.length)-parseInt(1);var tempvalue=value.substring(0,orginalLength-parseInt(1));tempvalue=tempvalue+'.000Z"';var temp=tempvalue.match(dateReg);if(temp!=null){var a=value.split("T");var d=a[0].split("-");d[0]=d[0].substring(1,d[0].length);newDate=new Date(d[0],(d[1]-1),d[2],"00","00","00");value=new Date(d[0],(d[1]-1),d[2],"00","00","00");newDate.setDate(newDate.getDate()+1);var checkout=element.datepicker({}).data("datepicker");checkout.date=new Date(checkout.date.getFullYear(),checkout.date.getMonth(),checkout.date.getDate());if(newDate.getTime()>checkout.date.valueOf()||element.val()==""){checkout.setDate(newDate);checkout.setStartDate(value);checkout.update();controller.$setViewValue(newDate);controller.$render();}else{if(newDate.getTime()<=checkout.date.valueOf()){checkout.setStartDate(value);checkout.update();controller.$render();}}}else{newDate=scope.parseDate(value);newDate.setDate(newDate.getDate());var checkout=element.datepicker({}).data("datepicker");checkout.date=new Date(checkout.date.getFullYear(),checkout.date.getMonth(),checkout.date.getDate());if(newDate.getTime()>checkout.date.valueOf()||element.val()==""){checkout.setDate(newDate);checkout.setStartDate(newDate);checkout.update();controller.$setViewValue(newDate);controller.$render();}else{if(newDate.getTime()<=checkout.date.valueOf()){checkout.setStartDate(value);checkout.update();controller.$render();}}}}else{var temp=value.match(dateReg);if(temp!=null){newDate=new Date(scope.$eval(value));value=new Date(scope.$eval(value));newDate.setDate(newDate.getDate());}else{newDate=scope.parseDate(value);}var checkout=element.datepicker({}).data("datepicker");checkout.date=new Date(checkout.date.getFullYear(),checkout.date.getMonth(),checkout.date.getDate());if(newDate.getTime()>checkout.date.valueOf()||element.val()==""){checkout.setDate(newDate);checkout.setStartDate(newDate);checkout.update();controller.$setViewValue(newDate);controller.$render();}else{if(newDate.getTime()<=checkout.date.valueOf()){checkout.setStartDate(newDate);checkout.update();controller.$render();}}}}else{var temp=value.match(dateReg);if(temp!=null){newDate=new Date(scope.$eval(value));value=new Date(scope.$eval(value));newDate.setDate(newDate.getDate());}else{newDate=scope.parseDate(value);}var checkout=element.datepicker({}).data("datepicker");checkout.date=new Date(checkout.date.getFullYear(),checkout.date.getMonth(),checkout.date.getDate());if(newDate.getTime()>checkout.date.valueOf()||element.val()==""){checkout.setDate(newDate);checkout.setStartDate(newDate);checkout.update();controller.$setViewValue(newDate);controller.$render();}else{if(newDate.getTime()<=checkout.date.valueOf()){checkout.setStartDate(newDate);checkout.update();controller.$render();}}}}});scope.parseDate=function(s){var months={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};var p=s.split("-");return new Date(p[2],months[p[1].toLowerCase()],p[0]);};}};}]);app.directive("myMaxDate",["$filter",function($filter){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,controller){attrs.$observe("maxDateVal",function(value){if(value){var newDate;var dateReg=/(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2})[+-.](\d{3})Z/;var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0){if(parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10)==parseInt(8)){var orginalLength=(value.length)-parseInt(1);var tempvalue=value.substring(0,orginalLength-parseInt(1));tempvalue=tempvalue+'.000Z"';var temp=tempvalue.match(dateReg);if(temp!=null){var a=value.split("T");var d=a[0].split("-");d[0]=d[0].substring(1,d[0].length);newDate=new Date(d[0],(d[1]-1),d[2],"00","00","00");value=new Date(d[0],(d[1]-1),d[2],"00","00","00");newDate.setDate(newDate.getDate()+1);}else{newDate=scope.parseDate(value);newDate.setDate(newDate.getDate()+1);}}else{var temp=value.match(dateReg);if(temp!=null){newDate=new Date(scope.$eval(value));newDate.setDate(newDate.getDate());}else{newDate=scope.parseDate(value);newDate.setDate(newDate.getDate()+1);}}}else{var temp=value.match(dateReg);if(temp!=null){newDate=new Date(scope.$eval(value));newDate.setDate(newDate.getDate());}else{newDate=scope.parseDate(value);newDate.setDate(newDate.getDate()+1);}}var checkout=element.datepicker({}).data("datepicker");checkout.date=new Date(checkout.date.getFullYear(),checkout.date.getMonth(),checkout.date.getDate());if(element.val()==""||newDate.getTime()<checkout.date.valueOf()){checkout.setDate(newDate);checkout.setEndDate(newDate);checkout.update();controller.$setViewValue(newDate);controller.$render();}else{if(newDate.getTime()>=checkout.date.valueOf()){checkout.setEndDate(newDate);checkout.update();controller.$render();}}}});scope.parseDate=function(s){var months={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};var p=s.split("-");return new Date(p[2],months[p[1].toLowerCase()],p[0]);};}};}]);app.directive("navigation",function(){return{restrict:"EA",template:'<a class="ld-hyperlink" ng-click="callMe()">Back</a>',controller:["$scope","$location",function($scope,$location){$scope.callMe=function(){if($scope.prevURL==undefined){location.href="index.html";}else{$location.path($scope.prevURL);}};}]};});app.directive("pageslide",["SecondaryMenuDetails",function(SecondaryMenuDetails){return{restrict:"EA",scope:{currentLoc:"@"},template:'<div class="menuBox" id="imgClick"><a ng-click="performAction()"><img style="margin-left:21%;margin-top:25%;cursor: pointer;" alt="" src="appResources/images/left_menu_icon.png" ></a></div>'+'<div style="display:none;padding:20px; color:white" id="demo-left">'+"<h3>{{currentTitle}}</h3>"+'<ul style="list-style-type: none;padding:0; margin:0;">'+'<li style="margin-top: 18px" ng-repeat="menuItems in currentArray" >'+'<a class="secondaryMenuLinks" target="_self" ng-click="psClose()" href="{{menuItems.href}}">{{menuItems.linkName}}</a>'+"</li>"+"</ul>"+"</div>",link:function(scope,element,attrs){attrs.$observe("currentLoc",function(value){scope.checkLoc=value;switch(scope.checkLoc){case"Course":scope.currentArray=SecondaryMenuDetails.courseMenu;scope.currentTitle="Courses";break;case"Competency":scope.currentArray=SecondaryMenuDetails.competencyMenu;scope.currentTitle="Competency";break;case"Roles":scope.currentArray=SecondaryMenuDetails.roleMenu;scope.currentTitle="Role";break;default:break;}});scope.isClosed=true;var imgClick=document.getElementById("imgClick");var content=document.getElementById("demo-left");var slider=document.createElement("div");var ngViewDiv=document.getElementById("SlidingDiv");slider.id="ng-pageslide";slider.style.transitionDuration="0.3s";slider.style.webkitTransitionDuration="0.3s";slider.style.zIndex=1000;slider.style.position="fixed";slider.style.width=0;slider.style.height=0;slider.style.transitionProperty="width, height";slider.style.height="100%";slider.style.overflow="auto";slider.style.background="#404040";slider.style.marginTop="2px";ngViewDiv.insertBefore(slider,ngViewDiv.firstChild);slider.appendChild(content);scope.performAction=function(){if(scope.isClosed==true){scope.psOpen();}else{scope.psClose();}};scope.psClose=function(){scope.isClosed=true;content.style.display="none";slider.style.width="0px";imgClick.style.transition="all 0.3s";imgClick.style.WebkitTransition="all 0.3s";imgClick.style.transform="translate(0px)";imgClick.style.WebkitTransform="translate(0px)";imgClick.style.msTransform="translate(0px)";};scope.psOpen=function(){slider.style.width="297px";scope.isClosed=false;imgClick.style.transition="all 0.3s";imgClick.style.WebkitTransition="all 0.3s";imgClick.style.transform="translate(296px)";imgClick.style.WebkitTransform="translate(296px)";imgClick.style.msTransform="translate(296px)";setTimeout(function(){content.style.display="block";},(0.3*1000));};$(document).click(function(){scope.psClose();});$("#imgClick").click(function(e){e.stopPropagation();});}};}]);app.directive("feedbackRating",function(){return{restrict:"A",scope:{rateValue:"="},template:"<table>"+"<tbody>"+"<tr>"+'<td style="min-width: 30px; "><a><span ng-class="rating1class" ng-mouseenter="onHover(1)"  ng-mouseleave="onMouseLeave()" ng-click="selectRating(1)"> </span></a> </td>'+'<td style="min-width: 30px;"><a><span ng-class="rating2class" ng-mouseenter="onHover(2)"  ng-mouseleave="onMouseLeave()" ng-click="selectRating(2)" > </span> </td>'+'<td style="min-width: 30px;"><a><span ng-class="rating3class" ng-mouseenter="onHover(3)"  ng-mouseleave="onMouseLeave()" ng-click="selectRating(3)" > </span> </td>'+'<td style="min-width: 30px;"><a><span ng-class="rating4class" ng-mouseenter="onHover(4)"  ng-mouseleave="onMouseLeave()" ng-click="selectRating(4)" > </span> </td>'+"</tr>"+"</tbody></table>",link:function(scope,element,attrs){if(typeof attrs.maxLevel=="undefined"){attrs.maxLevel="5";}scope.rating1class="feedback-rating-one";scope.rating2class="feedback-rating-two";scope.rating3class="feedback-rating-three";scope.rating4class="feedback-rating-four";scope.rateValue=0;attrs.rateValue=0;scope.selectRating=function(rate){switch(rate){case 1:scope.rating1class="feedback-rating-one-selected";scope.selectedValue=rate;scope.rating2class="feedback-rating-two";scope.rating3class="feedback-rating-three";scope.rating4class="feedback-rating-four";scope.rateValue=rate;break;case 2:scope.rating2class="feedback-rating-two-selected";scope.selectedValue=rate;scope.rateValue=rate;scope.rating1class="feedback-rating-one";scope.rating3class="feedback-rating-three";scope.rating4class="feedback-rating-four";break;case 3:scope.rating3class="feedback-rating-three-selected";scope.rating1class="feedback-rating-one";scope.rating2class="feedback-rating-two";scope.rating4class="feedback-rating-four";scope.rateValue=rate;break;case 4:scope.rating4class="feedback-rating-four-selected";scope.rating1class="feedback-rating-one";scope.rating2class="feedback-rating-two";scope.rating3class="feedback-rating-three";scope.rateValue=rate;break;default:break;}};scope.onMouseLeave=function(){switch(scope.rateValue){case 0:scope.rating1class="feedback-rating-one";scope.rating2class="feedback-rating-two";scope.rating3class="feedback-rating-three";scope.rating4class="feedback-rating-four";break;case 1:scope.rating2class="feedback-rating-two";scope.rating3class="feedback-rating-three";scope.rating4class="feedback-rating-four";break;case 2:scope.rating1class="feedback-rating-one";scope.rating3class="feedback-rating-three";scope.rating4class="feedback-rating-four";break;case 3:scope.rating1class="feedback-rating-one";scope.rating2class="feedback-rating-two";scope.rating4class="feedback-rating-four";break;case 4:scope.rating1class="feedback-rating-one";scope.rating2class="feedback-rating-two";scope.rating3class="feedback-rating-three";break;default:break;}};scope.onHover=function(rate){if(rate==1&&scope.rateValue!=1){scope.rating1class="feedback-rating-one-hover";}else{if(rate==2&&scope.rateValue!=2){scope.rating2class="feedback-rating-two-hover";}else{if(rate==3&&scope.rateValue!=3){scope.rating3class="feedback-rating-three-hover";}else{if(rate==4&&scope.rateValue!=4){scope.rating4class="feedback-rating-four-hover";}}}}};}};});var legacySupport=(angular.version.major===1&&angular.version.minor===0);app.directive("rangeSlider",["$document","$filter","$log",function($document,$filter,$log){var eventNamespace=".rangeSlider",defaults={disabled:false,orientation:"horizontal",step:0,decimalPlaces:0,showValues:true,preventEqualMinMax:false,attachHandleValues:false},actions=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup",over:"pointerdown",out:"mouseout"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",over:"MSPointerDown",out:"mouseout"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend",over:"mouseover touchstart",out:"mouseout"},onEvent=actions.start+eventNamespace,moveEvent=actions.move+eventNamespace,offEvent=actions.end+eventNamespace,overEvent=actions.over+eventNamespace,outEvent=actions.out+eventNamespace,client=function(f){try{return[(f.clientX||f.originalEvent.clientX||f.originalEvent.touches[0].clientX),(f.clientY||f.originalEvent.clientY||f.originalEvent.touches[0].clientY)];}catch(e){return["x","y"];}},restrict=function(value){return(value<0?0:(value>100?100:value));},isNumber=function(n){return !isNaN(parseFloat(n))&&isFinite(n);},scopeOptions={disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@",getterSetter:"@"};if(legacySupport){scopeOptions.disabled="=";scopeOptions.modelMin="=";scopeOptions.modelMax="=";}return{restrict:"A",replace:true,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min" style="bottom: -5px;"><i></i></div>','<div class="ngrs-handle ngrs-handle-max" style="bottom: -5px;"><i></i></div>','<div class="ngrs-join"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),scope:scopeOptions,link:function(scope,element,attrs,controller){var $slider=angular.element(element),handles=[element.find(".ngrs-handle-min"),element.find(".ngrs-handle-max")],values=[element.find(".ngrs-value-min"),element.find(".ngrs-value-max")],join=element.find(".ngrs-join"),pos="left",posOpp="right",orientation=0,allowedRange=[0,0],range=0,down=false;scope.filteredModelMin=modelMin();scope.filteredModelMax=modelMax();attrs.$observe("disabled",function(val){if(!angular.isDefined(val)){scope.disabled=defaults.disabled;}scope.$watch("disabled",setDisabledStatus);});attrs.$observe("orientation",function(val){if(!angular.isDefined(val)){scope.orientation=defaults.orientation;}var classNames=scope.orientation.split(" "),useClass;for(var i=0,l=classNames.length;i<l;i++){classNames[i]="ngrs-"+classNames[i];}useClass=classNames.join(" ");$slider.addClass(useClass);if(scope.orientation==="vertical"||scope.orientation==="vertical left"||scope.orientation==="vertical right"){pos="top";posOpp="bottom";orientation=1;}});attrs.$observe("step",function(val){if(!angular.isDefined(val)){scope.step=defaults.step;}});attrs.$observe("decimalPlaces",function(val){if(!angular.isDefined(val)){scope.decimalPlaces=defaults.decimalPlaces;}});attrs.$observe("showValues",function(val){if(!angular.isDefined(val)){scope.showValues=defaults.showValues;}else{if(val==="false"){scope.showValues=false;}else{scope.showValues=true;}}});attrs.$observe("pinHandle",function(val){if(!angular.isDefined(val)){scope.pinHandle=null;}else{if(val==="min"||val==="max"){scope.pinHandle=val;}else{scope.pinHandle=null;}}scope.$watch("pinHandle",setPinHandle);});attrs.$observe("preventEqualMinMax",function(val){if(!angular.isDefined(val)){scope.preventEqualMinMax=defaults.preventEqualMinMax;}else{if(val==="false"){scope.preventEqualMinMax=false;}else{scope.preventEqualMinMax=true;}}});attrs.$observe("attachHandleValues",function(val){if(!angular.isDefined(val)){scope.attachHandleValues=defaults.attachHandleValues;}else{if(val==="true"||val===""){scope.attachHandleValues=true;element.find(".ngrs-value-runner").addClass("ngrs-attached-handles");}else{scope.attachHandleValues=false;}}});function modelMin(newValue){if(scope.getterSetter){return arguments.length?scope.modelMin(newValue):scope.modelMin();}else{return arguments.length?(scope.modelMin=newValue):scope.modelMin;}}function modelMax(newValue){if(scope.getterSetter){return arguments.length?scope.modelMax(newValue):scope.modelMax();}else{return arguments.length?(scope.modelMax=newValue):scope.modelMax;}}scope.$watch("min",setMinMax);scope.$watch("max",setMinMax);scope.$watch(function(){return modelMin();},setModelMinMax);scope.$watch(function(){return modelMax();},setModelMinMax);function setPinHandle(status){if(status==="min"){angular.element(handles[0]).css("display","none");angular.element(handles[1]).css("display","block");}else{if(status==="max"){angular.element(handles[0]).css("display","block");angular.element(handles[1]).css("display","none");}else{angular.element(handles[0]).css("display","block");angular.element(handles[1]).css("display","block");}}}function setDisabledStatus(status){if(status){$slider.addClass("ngrs-disabled");}else{$slider.removeClass("ngrs-disabled");}}function setMinMax(){if(scope.min>scope.max){throwError("min must be less than or equal to max");}if(angular.isDefined(scope.min)&&angular.isDefined(scope.max)){if(!isNumber(scope.min)){throwError("min must be a number");}if(!isNumber(scope.max)){throwError("max must be a number");}range=scope.max-scope.min;allowedRange=[scope.min,scope.max];setModelMinMax();}}function setModelMinMax(){if(modelMin()>modelMax()){throwWarning("modelMin must be less than or equal to modelMax");modelMin(modelMax());}if((angular.isDefined(modelMin())||scope.pinHandle==="min")&&(angular.isDefined(modelMax())||scope.pinHandle==="max")){if(!isNumber(modelMin())){if(scope.pinHandle!=="min"){throwWarning("modelMin must be a number");}modelMin(scope.min);}if(!isNumber(modelMax())){if(scope.pinHandle!=="max"){throwWarning("modelMax must be a number");}modelMax(scope.max);}var handle1pos=restrict(((modelMin()-scope.min)/range)*100),handle2pos=restrict(((modelMax()-scope.min)/range)*100),value1pos,value2pos;if(scope.attachHandleValues){value1pos=handle1pos;value2pos=handle2pos;}modelMin(Math.max(scope.min,modelMin()));modelMax(Math.min(scope.max,modelMax()));if(scope.filter&&scope.filterOptions){scope.filteredModelMin=$filter(scope.filter)(modelMin(),scope.filterOptions);scope.filteredModelMax=$filter(scope.filter)(modelMax(),scope.filterOptions);}else{if(scope.filter){var filterTokens=scope.filter.split(":"),filterName=scope.filter.split(":")[0],filterOptions=filterTokens.slice().slice(1),modelMinOptions,modelMaxOptions;filterOptions=filterOptions.map(function(arg){if(isNumber(arg)){return +arg;}else{if((arg[0]=='"'&&arg[arg.length-1]=='"')||(arg[0]=="'"&&arg[arg.length-1]=="'")){return arg.slice(1,-1);}}});modelMinOptions=filterOptions.slice();modelMaxOptions=filterOptions.slice();modelMinOptions.unshift(modelMin());modelMaxOptions.unshift(modelMax());scope.filteredModelMin=$filter(filterName).apply(null,modelMinOptions);scope.filteredModelMax=$filter(filterName).apply(null,modelMaxOptions);}else{scope.filteredModelMin=modelMin();scope.filteredModelMax=modelMax();}}if(scope.min===scope.max&&modelMin()==modelMax()){angular.element(handles[0]).css(pos,"0%");angular.element(handles[1]).css(pos,"100%");if(scope.attachHandleValues){angular.element(values[0]).css(pos,"0%");angular.element(values[1]).css(pos,"100%");}angular.element(join).css(pos,"0%").css(posOpp,"0%");}else{angular.element(handles[0]).css(pos,handle1pos+"%");angular.element(handles[1]).css(pos,handle2pos+"%");if(scope.attachHandleValues){angular.element(values[0]).css(pos,value1pos+"%");angular.element(values[1]).css(pos,value2pos+"%");angular.element(values[1]).css(posOpp,"auto");}angular.element(join).css(pos,handle1pos+"%").css(posOpp,(100-handle2pos)+"%");if(handle1pos>95){angular.element(handles[0]).css("z-index",3);}}}}function handleMove(index){var $handle=handles[index];$handle.bind(onEvent+"X",function(event){var handleDownClass=(index===0?"ngrs-handle-min":"ngrs-handle-max")+"-down",modelValue=(index===0?modelMin():modelMax())-scope.min,originalPosition=(modelValue/range)*100,originalClick=client(event),previousClick=originalClick,previousProposal=false;if(angular.isFunction(scope.onHandleDown)){scope.onHandleDown();}angular.element("body").bind("selectstart"+eventNamespace,function(){return false;});if(!scope.disabled){down=true;$handle.addClass("ngrs-down");$slider.addClass("ngrs-focus "+handleDownClass);angular.element("body").addClass("ngrs-touching");$document.bind(moveEvent,function(e){e.preventDefault();var currentClick=client(e),movement,proposal,other,per=(scope.step/range)*100,otherModelPosition=(((index===0?modelMax():modelMin())-scope.min)/range)*100;if(currentClick[0]==="x"){return;}currentClick[0]-=originalClick[0];currentClick[1]-=originalClick[1];movement=[(previousClick[0]!==currentClick[0]),(previousClick[1]!==currentClick[1])];proposal=originalPosition+((currentClick[orientation]*100)/(orientation?$slider.height():$slider.width()));proposal=restrict(proposal);if(scope.preventEqualMinMax){if(per===0){per=(1/range)*100;}if(index===0){otherModelPosition=otherModelPosition-per;}else{if(index===1){otherModelPosition=otherModelPosition+per;}}}if(index===0){proposal=proposal>otherModelPosition?otherModelPosition:proposal;}else{if(index===1){proposal=proposal<otherModelPosition?otherModelPosition:proposal;}}if(scope.step>0){if(proposal<100&&proposal>0){proposal=Math.round(proposal/per)*per;}}if(proposal>95&&index===0){$handle.css("z-index",3);}else{$handle.css("z-index","");}if(movement[orientation]&&proposal!=previousProposal){if(index===0){modelMin(parseFloat(parseFloat((((proposal*range)/100)+scope.min)).toFixed(scope.decimalPlaces)));}else{if(index===1){modelMax(parseFloat(parseFloat((((proposal*range)/100)+scope.min)).toFixed(scope.decimalPlaces)));}}scope.$apply();previousProposal=proposal;}previousClick=currentClick;}).bind(offEvent,function(){if(angular.isFunction(scope.onHandleUp)){scope.onHandleUp();}$document.off(moveEvent);$document.off(offEvent);angular.element("body").removeClass("ngrs-touching");down=false;$handle.removeClass("ngrs-down");$handle.removeClass("ngrs-over");$slider.removeClass("ngrs-focus "+handleDownClass);});}}).on(overEvent,function(){$handle.addClass("ngrs-over");}).on(outEvent,function(){if(!down){$handle.removeClass("ngrs-over");}});}function throwError(message){scope.disabled=true;throw new Error("RangeSlider: "+message);}function throwWarning(message){$log.warn(message);}scope.$on("$destroy",function(){$slider.off(eventNamespace);angular.element("body").off(eventNamespace);$document.off(eventNamespace);for(var i=0,l=handles.length;i<l;i++){handles[i].off(eventNamespace);handles[i].off(eventNamespace+"X");}});$slider.bind("selectstart"+eventNamespace,function(event){return false;}).bind("click",function(event){event.stopPropagation();});handleMove(0);handleMove(1);}};}]);app.directive("calendar",function(){return{restrict:"E",template:'<div class="header" style="width: 420px;text-align: center;">'+'<span class="fa fa-angle-left" style="float:left;cursor:pointer;" ng-click="previous()" ng-show="prevarrow()"> </span>'+'<span class="fa fa-angle-left1" style="float:left;cursor:pointer;" ng-click="previous()" ng-show="disprevarrow()"> </span>'+'<span style="margin-top: -5px;"><img alt="owned.gif" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzc4REVFMTdCMTNFNjExQjU1NENBM0RCRjNBNDJBRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NDA4RUU0MDEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NDA4RUUzRjEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMzIwQTJGODMxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDNzhERUUxN0IxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+tRamRAAAAnxJREFUeNrMVT1oVEEQ3t0XNIrBH7AyzWl1KEjuBEEOjSDpxMLSWq3UFGkCEU0nSAo7wSAhaSzUIkJASUCwVmysjLFSgghiEpHD7K7f7Jv1Jnvv4R3kxIHvvX3fzuzs7MzO0/V6TWmtlPeKRdPjCJjnxvhJrf2ccxrzJirMgqsZ447DxjpntthorWGj5zwmPS+Kb9Wn2iRM7iRDa00lV/SRJ2nAvrK5mdlkLthg8YpzLiwuJTo6D5wUfHQwgteOZCe7ee4uXs3UBjICJ9JmGZjR9frQbZjdUr2VJ33s5CuO4xKitTxxArgDPAKmE6MHvPsLwA/Bt9lwjm4iwovx6Jbh5IUwWmWj98BS4mgXv+cTvs2G8gRfpzE8Ex31t/RDEj8DY1lml7R2iirL2kxxfq8hP4cwFyqV+JaNHzMmW8yjcSEi2ByQxZDKN2CKFvA+hyiix3FM/FYbPfWndlv3RZU4aimgvMP9Sco7RILyLrRxzhbuvCwiCneIFuACeUV+gcNUCLxZivoN69eA/Tz+CKx06ugU8Ex87wO+A9eBG8y9A47FbgEc5fE9YDRd0Kh/JGURvcyPLk8VsM5jKt8ZHq8LfbpTA6LMO3a0Abwt4FdLFvrwt4jKju4s8JPxRex2QvALQn9B8BPdRLRXXOJ+saFBwVeFflXwg904WizJERqwul+Qo3P/fY6GgTXGJ2AP8+OCl011XvDj3UR0UBzFgNCrCr4h9BuCr3bj6DUwyeMmVxPJQ9FeZJsZ5fYU72DHjlY48UUXuWih2U5z5HrYfWzPex39YYFmPLo1bvN0P35tpyP+nVwJjvAxbIx+ij/i1e2PKfwwN7Q2l38LMABmrNrPlKyPywAAAABJRU5ErkJggg==" />'+'<span style="padding-left: 10px;">{{month.format("MMMM YYYY")}}</span></span>'+'<span class="fa fa-angle-right" style="float:right;cursor:pointer;" ng-click="next()" ng-show="nextarrow()"> </span>'+'<span class="fa fa-angle-right1" style="float:right;cursor:pointer;" ng-click="next()" ng-show="disnextarrow()"> </span>'+"</div>"+'<div class="week names" style="border-top: none;height: 41px;">'+'<span class="weekdays">Sun</span>'+'<span class="weekdays">Mon</span>'+'<span class="weekdays">Tue</span>'+'<span class="weekdays">Wed</span>'+'<span class="weekdays">Thu</span>'+'<span class="weekdays">Fri</span>'+'<span class="weekdays">Sat</span>'+"</div>"+'<div class="week" ng-repeat="week in weeks">'+'<span class="day" ng-class="{today:day.isToday,selected: day.date.isSame(selected) && day.isCurrentMonth, inprogcomp: day.isComp && day.isCurrentMonth && !day.isReg, registered: day.isReg && day.isCurrentMonth, differentmonth:!day.isCurrentMonth}" ng-click="day.isCurrentMonth && select(day)" ng-repeat="day in week.days">'+'<span><div style="line-height: 17px !important;padding-top: 2px;padding-left: 38px;"><img ng-show ="day.isComp && !day.isReg " alt="taggedcomp.gif" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzc4REVFMTdCMTNFNjExQjU1NENBM0RCRjNBNDJBRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2M0JENjQ1MzEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2M0JENjQ1MjEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMzIwQTJGODMxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDNzhERUUxN0IxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+WtwEEAAAAURJREFUeNqM0j9Iw0AUx/GrSEVx8w8idVFQRwcXBycXdXK3m6MgakEX6aAiVBQXVwcXwVmcXRykLf7BQerSRa2DIK2DtIjxG/glXNME8+BDQq/38u7dSziOY3KlD2PFMNYxixQ+UcYlTvHi/XFzrNe0meZYxROWMYIODGAKu3jWmh92ggyOkAwk/bHeO3GMRe+Hdj27sWNa4wv76EI/XpHVhy5Q8yoYVfZgJPCLIgo6fwV9WLKPUAvZ7Hb2EPcYRxVD2MMb5uwElZAEPWqkuzEPB9eYwaD4PZiPKD+NR/WgoWtd0HreTpA10ZHTs2FV7Fa1ZR/hxvwfSeuD2+qDn2BFVxYn6jgJDtI3bmMmKOoILZP4EDNBNWqUNzChO5/Ge8jmOxxEJairipLuO2OtlTX/k7iKShCMc83Amqo601g3xZ8AAwALdka/MSJbuwAAAABJRU5ErkJggg==" />'+'<img ng-show ="day.isComp && day.isReg " alt="taggedcomp.gif" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzc4REVFMTdCMTNFNjExQjU1NENBM0RCRjNBNDJBRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2M0NGREI2MTEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2M0NGREI2MDEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMzIwQTJGODMxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDNzhERUUxN0IxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+zmGsNgAAAV5JREFUeNqM0z1LAzEcx/FUSqHipnUQXVTU0Regk4t2cpbi4i6i+DBIKQ7CiY66KSgU9AXoK+ggbfEBJ6cu2ooV5OpQPKTnNyU50iPV+8OH9Nr8f5dLrjHf94Xz/CF0NevLowzrmMcwPlHBNc6TqYsXPXd7ckDEZICuXCG9xuAgIezVxGZu5uZYfxEE0LzBcGhp+kE89F2GkHwQQHMfn9+RDE38wgF6MYhXZFHHOCGNHjVxwtLcvgFaKKME+fw1pLAiJ+iAhqVZ7uwRHjAFFyPYRxULZkDNEtCPMdVYhNysAuYwpASbk+6y/Aye1B546lgX1e9FMyArupejRs9YsVzVrvkIt+L/Shg33OMEqmbAqjqyKPWNU33RDiBNvmF3EQPKzHc7AlQ9RgxwzQszYAvT6sxn8WZpvg+/7h1/JrN4vZcY8uqyonb9kuW3zHnxP5Z6hR2c4YRGzzbpV4ABAPqzZFGjIFYRAAAAAElFTkSuQmCC" /></div></span>'+'<span ng-show ="day.isComp || day.isCompaign || day.isOwn || day.isReg"><div ng-class="{calendaricon:day.isComp, without_calendaricon: !day.isComp }"><span ng-class="{roundercorner:compare(currentdate,day.date) && day.isCurrentMonth && day.number>9, roundercorner1:compare(currentdate,day.date) && day.isCurrentMonth && day.number<10}">{{day.number}}</span></div></span>'+'<span><div style="line-height: 17px !important;">'+'<span style="margin-left: 2px;float: left;"><img ng-show ="day.isCompaign && !day.isReg" alt="compaign.gif" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzc4REVFMTdCMTNFNjExQjU1NENBM0RCRjNBNDJBRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2M0JENjQ1NzEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2M0JENjQ1NjEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMzIwQTJGODMxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDNzhERUUxN0IxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+4pizVwAAASVJREFUeNpi/P//P8OSCTcZiABtQFyFLsjEQByQAeJiINZC10uMAYxAPBGI2YA4FComD8SWxBgAku8H4iAoPwRK6wPxURCDBY9mLajNLkhiOkC8BogTgdgeiLlZsDhXDIinQG3F5sJgIN4IxFuB+B0Tkp9Atj0D4kwg9sfjvX9AfBmIpZG9sA+IlaBsZyDeD8RueMLlB5TtBbOFDUmBFRAfJhC4oNi4AcTbYAZsQLMBFBY/gfgaEC8E4m4gngDEB4H4L1J0wr2wCIhzkAyxA2JBIP6OxXYpIG4HYjUgvgUz4DQQRwCxLhDnQb30HYfzQQEdD3UlSjpYCcX80AAEKfiPJxz+40qJq6DOCyImk2AzAJREnwOxK7kGgBLKciCWJcYAgAADAHOKMdlPFmiaAAAAAElFTkSuQmCC" />'+'<img ng-show ="day.isCompaign && day.isReg " alt="compaign.gif" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzc4REVFMTdCMTNFNjExQjU1NENBM0RCRjNBNDJBRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2M0U1QUREQjEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2M0U1QUREQTEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMzIwQTJGODMxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDNzhERUUxN0IxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UNvl2wAAAUFJREFUeNpi/P//P8OSCTcZCIE7JoVtKmf6q9DFmRiIAEDNMkCqGEhrIYmB9TKCXIAPNBzxYgRSa4A4CMRtsNnWCBSTB7JlgOyjTAQ0g+T7oZpBIARK64M043UBUDPIuROB2AVNai0QJwKxERBzoxgAda4YEE+B2orLhXFAvBXoincsUI0gPxUBcRgQzwRifzya/wHxZSCWBmKIAUCwD4iVoGxnIN4PxG44DAAZ/ANqsRfMFjYkBVZAfJhAzIYCnX8DiLfBDNiAZgMoLH4C8TUgXgjE3UA8AYgPAvFfkAEwxTAvLALiHCRD7IBYEGjDdyyxIwWk2oG0GlD+FjwWgALhQEoXiPOA+DxQ0p5QAgOq+Y+RDoASk6EBqAFSQCiZY4uqVUCshpT6SDYAlESfA7ErWQYAnQ1KKMuBWJYYAwACDAD+vWrn0RiZKAAAAABJRU5ErkJggg=="/></span>'+'<span style="padding-right: 2px;float: right;"><img ng-show ="day.isOwn && !day.isReg" alt="owned.gif" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzc4REVFMTdCMTNFNjExQjU1NENBM0RCRjNBNDJBRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2M0NGREI1OTEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2M0NGREI1ODEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMzIwQTJGODMxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDNzhERUUxN0IxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+K5momgAAATlJREFUeNqc080rRFEYx/E7skBZCYspmURkZ4Ga2c7CP0CzFSVkmrJkaWvFQtmoKWyVxNKwsZaSlyILytusZhD5nuk3Oj3NdeOpT/fOc+557jnPuRN7WE4FJsaQRS9iOMcK8v5DbblC5VpvJg9iy+SG5BaH9m115veSrnu4NGOLQY3wV9CAe21hH0XdT+JM440ohRVowjYukEQZp8hpvB/NvxV4RSv6cIN29OAJHXjTfegWvvTQCe5wpXyXisfxGdVE17xuFarGu3I7UU108aI9LqiYe8EIjvBcq4C/gmFNymtSXH1IYwMHSIWtYBXTXt41bV596VQuLes62p8VjJrJ1UiogTYmMO4XmAv+HjN+geQ/Cgz4BabMsUXFB2b9Jq5hFxl12e27RZ92oGN9xDWOsal/ZiW+BRgA2kpARrHYxQIAAAAASUVORK5CYII=" />'+'<img ng-show ="day.isOwn && day.isReg" alt="owned.gif" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzc4REVFMTdCMTNFNjExQjU1NENBM0RCRjNBNDJBRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2M0YzMUJCNjEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2M0U1QURFMjEzODQxMUU2OUIzQTgzOUUwMjkyNzREOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMzIwQTJGODMxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDNzhERUUxN0IxM0U2MTFCNTU0Q0EzREJGM0E0MkFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+63epDgAAAUxJREFUeNqckj1LA0EQhvdCChWsJFgoIoaIwc5ChERsjT9Ao5ZBkCiKlZUkCBbWaiciIkhai6QQG3MW9jaiSTAopFCw8ws8n4M5WdYzRxx4ePfmdt9hZ9ZyHEfpkbenZpBVGAILbmA3nyweK5+wdAMOjyJXyj8mMLkwkyHje0u0BHfGvw0/15BWvQ1pgHuFWarF0DScww7U2NNuGoS1dQcU4BYSbH5Dr2FN/g9DJ7z+ZfACEYjDPXTDIDxDH7zLumkT55BHeOAKFclFkQHoIXcY1ES3eTGp5sWH5E4DxygV55FxMXMLpMCm+lFTAw6OITmYhDpswxesQz+cwSZG9i8DDu+xzhrmNTGIGvl9TBZ+DHLl1LSMr5XIYHLgNXFFtR5L+hQS/zAY0Q0WjbEFxScsm03sdd8/JKVpXfK0lTzdJ6jCJZxw/7pn8C3AACvFbTFvKDxWAAAAAElFTkSuQmCC" /></span>'+"</div></span>"+'<span ng-class="{roundercorner:compare(currentdate,day.date) && day.isCurrentMonth && day.number>9, roundercorner1:compare(currentdate,day.date) && day.isCurrentMonth && day.number<10}" ng-show ="!day.isReg && !day.isCompaign && !day.isOwn && !day.isComp">{{day.number}}</span>'+"</span></div>",scope:{currentdate:"=",selected:"=",regdate:"=",compdate:"=",owndate:"=",campaigndate:"=",isgcadmin:"=",onSelectPage:"&"},link:function(scope,element,attr){angular.element(document).ready(function(){scope.currentDateBorder=false;scope.prevArrow=0;scope.selected=_removeTime(scope.selected||moment());scope.month=scope.selected.clone();var start=scope.selected.clone();start.date(1);_removeTime(start.day(0));scope.prevarrow=function(){if(scope.isgcadmin){return true;}else{if(scope.prevArrow>0){return true;}else{return false;}}};scope.disprevarrow=function(){if(scope.isgcadmin){return false;}else{if(scope.prevArrow==0){return true;}else{return false;}}};scope.disnextarrow=function(){if(scope.isgcadmin){return false;}else{if(scope.prevArrow==2){return true;}else{return false;}}};scope.nextarrow=function(){if(scope.isgcadmin){return true;}else{if(scope.prevArrow<2){return true;}else{return false;}}};scope.$watch("owndate",function(value){if(scope.prevArrow==0){_buildMonth(scope,start,scope.month);}});scope.$watch("campaigndate",function(value){if(scope.prevArrow==0){_buildMonth(scope,start,scope.month);}});scope.$watch("compdate",function(value){if(scope.prevArrow==0){_buildMonth(scope,start,scope.month);}});scope.$watch("regdate",function(value){if(scope.prevArrow==0){_buildMonth(scope,start,scope.month);}});scope.select=function(day){scope.selected=day.date;};scope.compare=function(date1,date2){return angular.equals(date1,date2.format("MMM-DD-YYYY"));};scope.next=function(){if(scope.prevArrow<2){if(!scope.isgcadmin){scope.prevArrow=scope.prevArrow+1;}var next=scope.month.clone();_removeTime(next.month(next.month()+1).date(1).day(0));scope.month.month(scope.month.month()+1);var firstDay=scope.month.clone();scope.selected=firstDay.set("date",1);scope.$watch("regdate",function(value){if(scope.prevArrow>0||scope.isgcadmin){_buildMonth(scope,next,scope.month);}});}};scope.previous=function(){if(scope.prevArrow>0||scope.isgcadmin){if(!scope.isgcadmin){scope.prevArrow=scope.prevArrow-1;}var previous=scope.month.clone();_removeTime(previous.month(previous.month()-1).date(1).day(0));scope.month.month(scope.month.month()-1);var firstDay=scope.month.clone();scope.selected=firstDay.set("date",1);scope.$watch("regdate",function(value){if(scope.prevArrow>0||scope.isgcadmin){_buildMonth(scope,previous,scope.month);}});}};function _removeTime(date){return date.hour(0).minute(0).second(0).millisecond(0);}function _buildMonth(scope,start,month){scope.weeks=[];var done=false,date=start.clone(),monthIndex=date.month(),count=0;while(!done){scope.weeks.push({days:_buildWeek(date.clone(),month)});date.add(1,"w");done=count++>2&&monthIndex!==date.month();monthIndex=date.month();}}function _buildWeek(date,month){var days=[],temp=false,temp1=false,temp2=false,temp3=false,compName="",compDesc="";for(var i=0;i<7;i++){for(var j=0;j<scope.regdate.length;j++){temp=scope.compare(scope.regdate[j],date);if(temp){break;}}for(var j=0;j<scope.compdate.length;j++){temp1=scope.compare(scope.compdate[j],date);if(temp1){break;}}for(var j=0;j<scope.owndate.length;j++){temp2=scope.compare(scope.owndate[j],date);if(temp2){break;}}for(var j=0;j<scope.campaigndate.length;j++){temp3=scope.compare(scope.campaigndate[j].startDate,date);if(temp3){compName=scope.campaigndate[j].campignName;compDesc=scope.campaigndate[j].campignDesc;break;}}days.push({name:date.format("dd").substring(0,1),number:date.date(),isCurrentMonth:date.month()===month.month(),isToday:date.isSame(new Date(),"day"),isReg:temp,isComp:temp1,isOwn:temp2,isCompaign:temp3,campName:compName,campDesc:compDesc,date:date});date=date.clone();date.add(1,"d");}return days;}scope.$watch("selected",function(value){scope.onSelectPage();});});}};});app.directive("arrayFormatter",attrFormatter);function attrFormatter(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$formatters.push(function(inputValues){var formattedValues=[];if(angular.isArray(inputValues)){for(var i=0;i<inputValues.length;i++){formattedValues.push(inputValues[i]);}return formattedValues.join(",");}return inputValues;});ngModel.$parsers.push(function(value){return(value||"").split(",").map(function(selValues){return selValues.trim();});});}};}});